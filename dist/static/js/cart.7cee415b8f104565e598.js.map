{"version":3,"sources":["webpack:///static/js/cart.7cee415b8f104565e598.js","webpack:///./src/modules/js/api.js?4c58***","webpack:///./src/pages/cart/cart.js","webpack:///./src/modules/js/fetch.js?c08e","webpack:///./src/modules/js/mixin.js?53fa*","webpack:///./src/modules/js/cartService.js"],"names":["webpackJsonp","0","module","__webpack_exports__","__webpack_require__","url","hotLists","banner","topList","rank","subList","searchList","details","deal","cartAdd","cartLists","cartReduce","cartRemove","cartMremove","addressAdd","addressRemove","addressLists","addressUpdate","addressSetDefault","key","hasOwnProperty","108","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__cart_base_css__","__WEBPACK_IMPORTED_MODULE_1__cart_trade_css__","n","__WEBPACK_IMPORTED_MODULE_2__cart_css__","__WEBPACK_IMPORTED_MODULE_3_vue__","__WEBPACK_IMPORTED_MODULE_4_js_mixin_js__","__WEBPACK_IMPORTED_MODULE_5_axios__","__WEBPACK_IMPORTED_MODULE_5_axios___default","__WEBPACK_IMPORTED_MODULE_6_js_api_js__","__WEBPACK_IMPORTED_MODULE_7_velocity_animate__","__WEBPACK_IMPORTED_MODULE_7_velocity_animate___default","__WEBPACK_IMPORTED_MODULE_8_js_cartService_js__","el","data","lists","total","editingShop","editingShopIndex","removePopup","removeData","removeMsg","computed","allSelected","get","this","length","every","shop","checked","set","newVal","forEach","goodsList","good","allRemoveSelected","removeChecked","selectLists","arr","push","price","number","removeLists","created","getList","methods","_this","a","then","res","cartList","editing","editingMsg","selectGood","attr","selectShop","selectAll","edit","shopIndex","item","i","reduce","id","add","remove","goodIndex","removeList","removeConfirm","_this2","_removeData","post","splice","removeShop","ids","findIndex","start","e","startX","changedTouches","clientX","end","endX","left","$refs","mixins","28","fetch","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","resolve","reject","__WEBPACK_IMPORTED_MODULE_1_axios___default","status","location","href","catch","error","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_1_axios__","6","mixin","filters","priceSwitch","toFixed","68","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_2_js_fetch_js__","__WEBPACK_IMPORTED_MODULE_3_js_api_js__","Cart","70","exports","71","72"],"mappings":"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","file":"static/js/cart.7cee415b8f104565e598.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 0:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar url = {\n  hotLists: '/index/hotLists',\n  banner: '/index/banner',\n  topList: '/category/topList',\n  rank: '/category/rank',\n  subList: '/category/subList',\n  searchList: '/search/list',\n  details: '/goods/details',\n  deal: '/goods/deal',\n  cartAdd: '/cart/add',\n  cartLists: '/cart/list',\n  cartReduce: '/cart/reduce',\n  cartRemove: '/cart/remove',\n  cartMremove: '/cart/mremove',\n  addressAdd: '/address/add',\n  addressRemove: '/address/remove',\n  addressLists: '/address/list',\n  addressUpdate: '/address/update',\n  addressSetDefault: '/address/setDefault'\n  // 开发环境和真是环境切换\n  // let host = ''\n  // 备用接口\n  // const host = 'http://rap2api.taobao.org/app/mock/7058'\n  // 个人接口\n};var host = 'https://easy-mock.com/mock/5bea1e7f12ea3f1cbb0fd9f6';\nfor (var key in url) {\n  if (url.hasOwnProperty(key)) {\n    url[key] = host + url[key];\n  }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (url);\n\n/***/ }),\n\n/***/ 108:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__cart_base_css__ = __webpack_require__(71);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__cart_base_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__cart_base_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cart_trade_css__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cart_trade_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__cart_trade_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cart_css__ = __webpack_require__(70);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cart_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__cart_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vue__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_js_mixin_js__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_axios__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_js_api_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_velocity_animate__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_velocity_animate___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_velocity_animate__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_js_cartService_js__ = __webpack_require__(68);\n\n\n\n\n\n\n\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_3_vue__[\"default\"]({\n  el: '.container',\n  data: {\n    lists: null,\n    total: 0,\n    editingShop: null,\n    editingShopIndex: -1,\n    removePopup: false,\n    removeData: null,\n    removeMsg: ''\n  },\n  computed: {\n    allSelected: {\n      get: function get() {\n        if (this.lists && this.lists.length) {\n          return this.lists.every(function (shop) {\n            return shop.checked;\n          });\n        }\n        return false;\n      },\n      set: function set(newVal) {\n        this.lists.forEach(function (shop) {\n          shop.checked = newVal;\n          shop.goodsList.forEach(function (good) {\n            good.checked = newVal;\n          });\n        });\n      }\n    },\n    allRemoveSelected: {\n      get: function get() {\n        if (this.editingShop) {\n          return this.editingShop.removeChecked;\n        }\n        return false;\n      },\n      set: function set(newVal) {\n        if (this.editingShop) {\n          this.editingShop.removeChecked = newVal;\n          this.editingShop.goodsList.forEach(function (good) {\n            good.removeChecked = newVal;\n          });\n        }\n      }\n    },\n    //选择状态\n    selectLists: function selectLists() {\n      if (this.lists && this.lists.length) {\n        var arr = [];\n        var total = 0;\n        this.lists.forEach(function (shop) {\n          shop.goodsList.forEach(function (good) {\n            if (good.checked) {\n              arr.push(good);\n              total += good.price * good.number;\n            }\n          });\n        });\n        this.total = total;\n        return arr;\n      }\n      return [];\n    },\n\n    //编辑状态\n    removeLists: function removeLists() {\n      if (this.editingShop) {\n        var arr = [];\n        this.editingShop.goodsList.forEach(function (good) {\n          if (good.removeChecked) {\n            arr.push(good);\n          }\n        });\n        return arr;\n      }\n      return [];\n    }\n  },\n  created: function created() {\n    this.getList();\n  },\n\n  methods: {\n    //获取原始数据并初始化\n    getList: function getList() {\n      var _this = this;\n\n      __WEBPACK_IMPORTED_MODULE_5_axios___default.a.get(__WEBPACK_IMPORTED_MODULE_6_js_api_js__[\"a\" /* default */].cartLists).then(function (res) {\n        var lists = res.data.cartList;\n        lists.forEach(function (shop) {\n          shop.checked = true;\n          shop.removeChecked = false;\n          shop.editing = false;\n          shop.editingMsg = '编辑';\n          shop.goodsList.forEach(function (good) {\n            good.checked = true;\n            good.removeChecked = false;\n          });\n        });\n        _this.lists = lists;\n      });\n    },\n\n    //点击选择单独商品\n    selectGood: function selectGood(shop, good) {\n      // console.log(good.checked)\n      // console.log(shop)\n      var attr = this.editingShop ? 'removeChecked' : 'checked';\n      good[attr] = !good[attr];\n      shop[attr] = shop.goodsList.every(function (good) {\n        return good[attr];\n      });\n    },\n\n    //点击选择商店\n    selectShop: function selectShop(shop) {\n      var attr = this.editingShop ? 'removeChecked' : 'checked';\n      shop[attr] = !shop[attr];\n      shop.goodsList.forEach(function (good) {\n        good[attr] = shop[attr];\n      });\n    },\n\n    //全选按钮\n    selectAll: function selectAll() {\n      // console.log(this.allSelected)\n      var attr = this.editingShop ? 'allRemoveSelected' : 'allSelected';\n      this[attr] = !this[attr];\n    },\n\n    //切换编辑和完成状态\n    edit: function edit(shop, shopIndex) {\n      shop.editing = !shop.editing;\n      shop.editingMsg = shop.editing ? '完成' : '编辑';\n      // 隐藏其他店铺\n      this.lists.forEach(function (item, i) {\n        if (shopIndex !== i) {\n          item.editing = false;\n          item.editingMsg = shop.editing ? '' : '编辑';\n        }\n      });\n      this.editingShop = shop.editing ? shop : null;\n      this.editingShopIndex = shop.editing ? shopIndex : -1;\n    },\n    reduce: function reduce(good) {\n      if (good.number === 1) return;\n      // axios.post(url.cartReduce, {\n      //   id: good.id,\n      //   number: 1\n      // }).then(res => {\n      //   good.number--\n      // })\n      __WEBPACK_IMPORTED_MODULE_8_js_cartService_js__[\"a\" /* default */].reduce(good.id).then(function (res) {\n        good.number--;\n      });\n    },\n    add: function add(good) {\n      // axios.post(url.cartAdd, {\n      //   id: good.id,\n      //   number: 1\n      // }).then(res => {\n      //   good.number++\n      // })\n      __WEBPACK_IMPORTED_MODULE_8_js_cartService_js__[\"a\" /* default */].add(good.id).then(function (res) {\n        good.number++;\n      });\n    },\n    remove: function remove(shop, shopIndex, good, goodIndex) {\n      this.removePopup = true;\n      this.removeData = { shop: shop, shopIndex: shopIndex, good: good, goodIndex: goodIndex };\n      this.removeMsg = '确认要删除该商品么？';\n    },\n    removeList: function removeList() {\n      this.removePopup = true;\n      this.removeMsg = '\\u786E\\u5B9A\\u5C06\\u6240\\u9009 ' + this.removeLists.length + ' \\u4E2A\\u5546\\u54C1\\u5220\\u9664\\uFF1F';\n    },\n    removeConfirm: function removeConfirm() {\n      var _this2 = this;\n\n      if (this.removeMsg === '确认要删除该商品么？') {\n        var _removeData = this.removeData,\n            shop = _removeData.shop,\n            shopIndex = _removeData.shopIndex,\n            good = _removeData.good,\n            goodIndex = _removeData.goodIndex;\n\n        __WEBPACK_IMPORTED_MODULE_5_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_6_js_api_js__[\"a\" /* default */].cartRemove, {\n          id: good.id\n        }).then(function (res) {\n          shop.goodsList.splice(goodIndex, 1);\n          if (!shop.goodsList.length) {\n            _this2.lists.splice(shopIndex, 1);\n            _this2.removeShop();\n          }\n          _this2.removePopup = false;\n\n          //解决滑动删除单项后下一个继承样式的问题\n          // this.$refs[`goods-${shopIndex}-${goodIndex}`][0].style.left = '0px'\n        });\n      } else {\n        var ids = [];\n        this.removeLists.forEach(function (good) {\n          ids.push(good.id);\n        });\n        __WEBPACK_IMPORTED_MODULE_5_axios___default.a.post(__WEBPACK_IMPORTED_MODULE_6_js_api_js__[\"a\" /* default */].cartMremove, {\n          ids: ids\n        }).then(function (res) {\n          var arr = [];\n          _this2.editingShop.goodsList.forEach(function (good) {\n            var index = _this2.removeLists.findIndex(function (item) {\n              return item.id == good.id;\n            });\n            if (index === -1) {\n              arr.push(good);\n            }\n          });\n          if (arr.length) {\n            _this2.editingShop.goodsList = arr;\n          } else {\n            _this2.lists.splice(_this2.editingShopIndex, 1);\n            _this2.removeShop();\n          }\n          _this2.removePopup = false;\n        });\n      }\n    },\n\n    // 删除店铺重置状态\n    removeShop: function removeShop() {\n      this.editingShop = null;\n      this.editingShopIndex = -1;\n      this.lists.forEach(function (shop) {\n        shop.editing = false;\n        shop.editingMsg = '编辑';\n      });\n    },\n\n    // 拖动删除效果\n    start: function start(e, good) {\n      good.startX = e.changedTouches[0].clientX;\n    },\n    end: function end(e, shopIndex, good, goodIndex) {\n\n      var endX = e.changedTouches[0].clientX;\n      // console.log(endX,good.startX)\n      var left = '0';\n      if (good.startX - endX > 100) {\n        left = '-60px';\n      }\n      if (endX - good.startX > 100) {\n        left = '0px';\n      }\n      // console.log(this.$refs[`goods-${shopIndex}-${goodIndex}`])\n      __WEBPACK_IMPORTED_MODULE_7_velocity_animate___default()(this.$refs['goods-' + shopIndex + '-' + goodIndex], {\n        left: left\n      });\n    }\n  },\n  mixins: [__WEBPACK_IMPORTED_MODULE_4_js_mixin_js__[\"a\" /* default */]]\n});\n\n/***/ }),\n\n/***/ 28:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_axios__);\n\n\n\nfunction fetch(url, data) {\n  return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n    var type = !data ? __WEBPACK_IMPORTED_MODULE_1_axios___default.a.get(url, data) : __WEBPACK_IMPORTED_MODULE_1_axios___default.a.post(url, data);\n    type.then(function (res) {\n      var status = res.data.status;\n      if (status === 200) {\n        resolve(res);\n      }\n      if (status === 300) {\n        location.href = 'login.html';\n        resolve(res);\n      }\n      reject(res);\n    }).catch(function (error) {\n      reject(res);\n    });\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (fetch);\n\n/***/ }),\n\n/***/ 6:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar mixin = {\n  filters: {\n    priceSwitch: function priceSwitch(price) {\n      return price.toFixed(2);\n    }\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (mixin);\n\n/***/ }),\n\n/***/ 68:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_js_fetch_js__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_js_api_js__ = __webpack_require__(0);\n\n\n\n\n\nvar Cart = function () {\n  function Cart() {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, Cart);\n  }\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(Cart, null, [{\n    key: 'add',\n    value: function add(id) {\n      return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_js_fetch_js__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_3_js_api_js__[\"a\" /* default */].cartAdd, {\n        id: id,\n        number: 1\n      });\n    }\n  }, {\n    key: 'reduce',\n    value: function reduce(id) {\n      return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_js_fetch_js__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_3_js_api_js__[\"a\" /* default */].cartReduce, {\n        id: id,\n        number: 1\n      });\n    }\n  }]);\n\n  return Cart;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Cart);\n\n/***/ }),\n\n/***/ 70:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 71:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 72:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[108]);\n\n\n// WEBPACK FOOTER //\n// static/js/cart.7cee415b8f104565e598.js","let url = {\r\n  hotLists: '/index/hotLists',\r\n  banner: '/index/banner',\r\n  topList: '/category/topList',\r\n  rank: '/category/rank',\r\n  subList: '/category/subList',\r\n  searchList: '/search/list',\r\n  details: '/goods/details',\r\n  deal: '/goods/deal',\r\n  cartAdd: '/cart/add',\r\n  cartLists: '/cart/list',\r\n  cartReduce: '/cart/reduce',\r\n  cartRemove: '/cart/remove',\r\n  cartMremove: '/cart/mremove',\r\n  addressAdd: '/address/add',\r\n  addressRemove: '/address/remove',\r\n  addressLists: '/address/list',\r\n  addressUpdate: '/address/update',\r\n  addressSetDefault: '/address/setDefault',\r\n}\r\n// 开发环境和真是环境切换\r\n// let host = ''\r\n// 备用接口\r\n// const host = 'http://rap2api.taobao.org/app/mock/7058'\r\n// 个人接口\r\nconst host = 'https://easy-mock.com/mock/5bea1e7f12ea3f1cbb0fd9f6'\r\nfor (let key in url) {\r\n  if (url.hasOwnProperty(key)) {\r\n    url[key] = host + url[key];\r\n  }\r\n}\r\n\r\nexport default url\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","import './cart_base.css'\r\nimport './cart_trade.css'\r\nimport './cart.css'\r\n\r\nimport Vue from 'vue'\r\nimport mixin from 'js/mixin.js'\r\nimport axios from 'axios'\r\nimport url from 'js/api.js'\r\nimport velocity from 'velocity-animate'\r\nimport Cart from 'js/cartService.js'\r\n\r\nnew Vue({\r\n  el: '.container',\r\n  data: {\r\n    lists: null,\r\n    total: 0,\r\n    editingShop: null,\r\n    editingShopIndex: -1,\r\n    removePopup: false,\r\n    removeData: null,\r\n    removeMsg: '',\r\n  },\r\n  computed: {\r\n    allSelected: {\r\n      get() {\r\n        if(this.lists&&this.lists.length){\r\n          return this.lists.every(shop => {\r\n            return shop.checked\r\n          })\r\n        }\r\n        return false\r\n      },\r\n      set(newVal) {\r\n        this.lists.forEach(shop => {\r\n          shop.checked = newVal\r\n          shop.goodsList.forEach(good => {\r\n            good.checked = newVal\r\n          })\r\n        })\r\n      }\r\n    },\r\n    allRemoveSelected: {\r\n      get() {\r\n        if(this.editingShop) {\r\n          return this.editingShop.removeChecked\r\n        }\r\n        return false\r\n      },\r\n      set(newVal) {\r\n        if(this.editingShop) {\r\n          this.editingShop.removeChecked = newVal\r\n          this.editingShop.goodsList.forEach(good => {\r\n            good.removeChecked = newVal\r\n          })\r\n        }\r\n      }\r\n    },\r\n    //选择状态\r\n    selectLists() {\r\n      if(this.lists&&this.lists.length) {\r\n        let arr = []\r\n        let total = 0\r\n        this.lists.forEach(shop => {\r\n          shop.goodsList.forEach(good => {\r\n            if(good.checked) {\r\n              arr.push(good)\r\n              total += good.price * good.number\r\n            }\r\n          })\r\n        })\r\n        this.total = total\r\n        return arr\r\n      }\r\n      return []\r\n    },\r\n    //编辑状态\r\n    removeLists() {\r\n      if(this.editingShop) {\r\n        let arr = []\r\n        this.editingShop.goodsList.forEach(good => {\r\n          if(good.removeChecked) {\r\n            arr.push(good)\r\n          }\r\n        })\r\n        return arr\r\n      }\r\n      return []\r\n    }\r\n  },\r\n  created() {\r\n    this.getList()\r\n  },\r\n  methods: {\r\n    //获取原始数据并初始化\r\n    getList() {\r\n      axios.get(url.cartLists).then(res => {\r\n        let lists = res.data.cartList\r\n        lists.forEach(shop => {\r\n          shop.checked = true\r\n          shop.removeChecked = false\r\n          shop.editing = false\r\n          shop.editingMsg = '编辑'\r\n          shop.goodsList.forEach(good => {\r\n            good.checked = true\r\n            good.removeChecked =false\r\n          })\r\n        })\r\n        this.lists = lists\r\n      })\r\n    },\r\n    //点击选择单独商品\r\n    selectGood(shop,good) {\r\n      // console.log(good.checked)\r\n      // console.log(shop)\r\n      let attr = this.editingShop ? 'removeChecked' : 'checked'\r\n      good[attr] = !good[attr]\r\n      shop[attr] = shop.goodsList.every(good => {\r\n        return good[attr]\r\n      })\r\n    },\r\n    //点击选择商店\r\n    selectShop(shop) {\r\n      let attr = this.editingShop ? 'removeChecked' : 'checked'\r\n      shop[attr] = !shop[attr]\r\n      shop.goodsList.forEach(good => {\r\n        good[attr] = shop[attr]\r\n      })\r\n    },\r\n    //全选按钮\r\n    selectAll() {\r\n      // console.log(this.allSelected)\r\n      let attr = this.editingShop ? 'allRemoveSelected' : 'allSelected'\r\n      this[attr] = !this[attr]\r\n    },\r\n    //切换编辑和完成状态\r\n    edit(shop,shopIndex) {\r\n      shop.editing = !shop.editing\r\n      shop.editingMsg = shop.editing ? '完成' : '编辑'\r\n      // 隐藏其他店铺\r\n      this.lists.forEach((item,i) => {\r\n        if(shopIndex !== i) {\r\n          item.editing = false\r\n          item.editingMsg = shop.editing ? '' : '编辑'\r\n        }\r\n      })\r\n      this.editingShop = shop.editing ? shop : null\r\n      this.editingShopIndex = shop.editing ? shopIndex : -1\r\n    },\r\n    reduce(good) {\r\n      if(good.number === 1) return\r\n      // axios.post(url.cartReduce, {\r\n      //   id: good.id,\r\n      //   number: 1\r\n      // }).then(res => {\r\n      //   good.number--\r\n      // })\r\n      Cart.reduce(good.id).then(res => {\r\n        good.number--\r\n      })\r\n    },\r\n    add(good) {\r\n      // axios.post(url.cartAdd, {\r\n      //   id: good.id,\r\n      //   number: 1\r\n      // }).then(res => {\r\n      //   good.number++\r\n      // })\r\n      Cart.add(good.id).then(res => {\r\n        good.number++\r\n      })\r\n    },\r\n    remove(shop,shopIndex,good,goodIndex) {\r\n      this.removePopup = true\r\n      this.removeData = {shop,shopIndex,good,goodIndex}\r\n      this.removeMsg = '确认要删除该商品么？'\r\n    },\r\n    removeList() {\r\n      this.removePopup = true\r\n      this.removeMsg = `确定将所选 ${this.removeLists.length} 个商品删除？`\r\n    },\r\n    \r\n    removeConfirm() {\r\n      if(this.removeMsg === '确认要删除该商品么？') {\r\n        let {shop,shopIndex,good,goodIndex} = this.removeData\r\n        axios.post(url.cartRemove, {\r\n          id: good.id\r\n        }).then(res => {\r\n          shop.goodsList.splice(goodIndex, 1)\r\n          if(!shop.goodsList.length) {\r\n            this.lists.splice(shopIndex,1)\r\n            this.removeShop()\r\n          }\r\n          this.removePopup = false\r\n\r\n          //解决滑动删除单项后下一个继承样式的问题\r\n          // this.$refs[`goods-${shopIndex}-${goodIndex}`][0].style.left = '0px'\r\n        })\r\n      }else {\r\n        let ids = []\r\n        this.removeLists.forEach(good => {\r\n          ids.push(good.id)\r\n        })\r\n        axios.post(url.cartMremove, {\r\n          ids\r\n        }).then(res => {\r\n          let arr =[]\r\n          this.editingShop.goodsList.forEach(good => {\r\n            let index = this.removeLists.findIndex(item => {\r\n              return item.id == good.id\r\n            })\r\n            if(index === -1) {\r\n              arr.push(good)\r\n            }\r\n          })\r\n          if(arr.length) {\r\n            this.editingShop.goodsList = arr\r\n          }else {\r\n            this.lists.splice(this.editingShopIndex, 1)\r\n            this.removeShop()\r\n          }\r\n          this.removePopup = false\r\n        })\r\n      }\r\n\r\n    },\r\n    // 删除店铺重置状态\r\n    removeShop() {\r\n      this.editingShop = null\r\n      this.editingShopIndex = -1\r\n      this.lists.forEach(shop => {\r\n        shop.editing = false\r\n        shop.editingMsg = '编辑'\r\n      })\r\n    },\r\n    // 拖动删除效果\r\n    start(e, good) {\r\n      good.startX = e.changedTouches[0].clientX\r\n    },\r\n    end(e,shopIndex,good, goodIndex) {\r\n      \r\n      let endX = e.changedTouches[0].clientX\r\n      // console.log(endX,good.startX)\r\n      let left = '0'\r\n      if(good.startX - endX > 100){\r\n        left = '-60px'\r\n      }\r\n      if(endX - good.startX > 100){\r\n        left = '0px'\r\n      }\r\n      // console.log(this.$refs[`goods-${shopIndex}-${goodIndex}`])\r\n      velocity(this.$refs[`goods-${shopIndex}-${goodIndex}`], {\r\n        left\r\n      })\r\n    }\r\n  },\r\n  mixins: [mixin]\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js","import axios from 'axios'\r\n\r\nfunction fetch(url, data) {\r\n  return new Promise((resolve,reject) => {\r\n    let type = !data ? axios.get(url, data) : axios.post(url, data)\r\n    type.then(res => {\r\n      let status = res.data.status\r\n      if(status === 200) {\r\n        resolve(res)\r\n      }\r\n      if(status === 300) {\r\n        location.href = 'login.html'\r\n        resolve(res)\r\n      }\r\n      reject(res)\r\n    }).catch(error => {\r\n      reject(res)\r\n    })\r\n  })\r\n}\r\n\r\nexport default fetch\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/fetch.js","let mixin = {\r\n  filters: {\r\n    priceSwitch(price) {\r\n      return price.toFixed(2)\r\n    }\r\n  }\r\n}\r\n\r\nexport default mixin\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/mixin.js","import fetch from 'js/fetch.js'\r\nimport url from 'js/api.js'\r\n\r\nclass Cart {\r\n  static add(id) {\r\n    return fetch(url.cartAdd, {\r\n      id,\r\n      number: 1\r\n    })\r\n  }\r\n  static reduce(id) {\r\n    return fetch(url.cartReduce, {\r\n      id,\r\n      number: 1\r\n    })\r\n  }\r\n}\r\n\r\nexport default Cart\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/cartService.js"],"sourceRoot":""}